<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ValuerPro Real-Time AI Monitoring Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #0f0f23;
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .dashboard-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            min-height: 100vh;
        }
        
        .sidebar {
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
            border-right: 1px solid #2a2a3e;
            padding: 2rem 1rem;
            position: fixed;
            height: 100vh;
            width: 300px;
            overflow-y: auto;
        }
        
        .logo {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .logo h1 {
            color: #00f5ff;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .logo p {
            color: #888;
            font-size: 0.875rem;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            padding: 1rem;
            background: rgba(0, 245, 255, 0.1);
            border-radius: 8px;
            border: 1px solid #00f5ff;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #00ff00;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .nav-section {
            margin-bottom: 2rem;
        }
        
        .nav-section h3 {
            color: #ccc;
            font-size: 0.875rem;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .nav-item {
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .nav-item:hover {
            background: rgba(0, 245, 255, 0.1);
            border-color: #00f5ff;
        }
        
        .nav-item.active {
            background: rgba(0, 245, 255, 0.2);
            border-color: #00f5ff;
        }
        
        .main-content {
            margin-left: 300px;
            padding: 2rem;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #2a2a3e;
        }
        
        .header h2 {
            color: #00f5ff;
            font-size: 2rem;
        }
        
        .connection-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(0, 255, 0, 0.1);
            border-radius: 20px;
            border: 1px solid #00ff00;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #1a1a2e, #2a2a3e);
            border: 1px solid #3a3a4e;
            border-radius: 12px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #00f5ff, #ff0080);
        }
        
        .metric-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .metric-title {
            color: #ccc;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .metric-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #00f5ff;
            margin-bottom: 0.5rem;
        }
        
        .metric-change {
            font-size: 0.875rem;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .metric-change.positive {
            background: rgba(0, 255, 0, 0.1);
            color: #00ff00;
        }
        
        .metric-change.negative {
            background: rgba(255, 0, 0, 0.1);
            color: #ff4757;
        }
        
        .chart-container {
            height: 300px;
            margin-top: 1rem;
            position: relative;
        }
        
        .alerts-container {
            background: linear-gradient(135deg, #1a1a2e, #2a2a3e);
            border: 1px solid #3a3a4e;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .alert-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.2);
            border-left: 4px solid #ffa500;
        }
        
        .alert-item.critical {
            border-left-color: #ff4757;
        }
        
        .alert-item.high {
            border-left-color: #ff6b35;
        }
        
        .alert-item.medium {
            border-left-color: #ffa500;
        }
        
        .alert-item.low {
            border-left-color: #5dade2;
        }
        
        .alert-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .alert-content {
            flex-grow: 1;
        }
        
        .alert-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .alert-description {
            color: #ccc;
            font-size: 0.875rem;
        }
        
        .alert-time {
            color: #888;
            font-size: 0.75rem;
            white-space: nowrap;
        }
        
        .predictions-panel {
            background: linear-gradient(135deg, #1a1a2e, #2a2a3e);
            border: 1px solid #3a3a4e;
            border-radius: 12px;
            padding: 1.5rem;
        }
        
        .prediction-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 1rem;
            background: rgba(0, 245, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(0, 245, 255, 0.2);
        }
        
        .prediction-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00f5ff, #ff0080);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .prediction-content h4 {
            color: #00f5ff;
            margin-bottom: 0.5rem;
        }
        
        .prediction-content p {
            color: #ccc;
            font-size: 0.875rem;
        }
        
        .confidence-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin-top: 0.5rem;
            overflow: hidden;
        }
        
        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #00f5ff, #00ff00);
            border-radius: 2px;
            transition: width 0.5s ease;
        }
        
        .live-indicator {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            z-index: 1000;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 15, 35, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .loading-overlay.visible {
            opacity: 1;
            visibility: visible;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(0, 245, 255, 0.3);
            border-top: 3px solid #00f5ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error-message {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid #ff4757;
            color: #ff4757;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
        }
        
        @media (max-width: 768px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: relative;
                width: 100%;
                height: auto;
            }
            
            .main-content {
                margin-left: 0;
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="sidebar">
            <div class="logo">
                <h1>ValuerPro AI</h1>
                <p>Real-Time Monitoring</p>
            </div>
            
            <div class="status-indicator">
                <div class="status-dot" id="statusDot"></div>
                <div>
                    <div style="font-weight: 600;">System Status</div>
                    <div style="font-size: 0.875rem; color: #888;" id="systemStatus">Initializing...</div>
                </div>
            </div>
            
            <div class="nav-section">
                <h3>Monitoring</h3>
                <div class="nav-item active" data-tab="overview">Overview</div>
                <div class="nav-item" data-tab="health">System Health</div>
                <div class="nav-item" data-tab="tests">Test Results</div>
                <div class="nav-item" data-tab="performance">Performance</div>
            </div>
            
            <div class="nav-section">
                <h3>AI Insights</h3>
                <div class="nav-item" data-tab="predictions">Predictions</div>
                <div class="nav-item" data-tab="alerts">Alerts</div>
                <div class="nav-item" data-tab="trends">Trends</div>
            </div>
            
            <div class="nav-section">
                <h3>Settings</h3>
                <div class="nav-item" data-tab="configuration">Configuration</div>
                <div class="nav-item" data-tab="export">Export Data</div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="header">
                <h2 id="pageTitle">System Overview</h2>
                <div class="connection-status" id="connectionStatus">
                    <div class="status-dot"></div>
                    <span>Connected</span>
                </div>
            </div>
            
            <div class="error-message" id="errorMessage"></div>
            
            <div id="overviewTab" class="tab-content">
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-title">Overall Quality Score</div>
                        </div>
                        <div class="metric-value" id="qualityScore">--</div>
                        <div class="metric-change positive" id="qualityChange">+2.1%</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-title">Test Pass Rate</div>
                        </div>
                        <div class="metric-value" id="passRate">--</div>
                        <div class="metric-change positive" id="passRateChange">+1.5%</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-title">Performance Score</div>
                        </div>
                        <div class="metric-value" id="performanceScore">--</div>
                        <div class="metric-change negative" id="performanceChange">-0.8%</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-title">Active Tests</div>
                        </div>
                        <div class="metric-value" id="activeTests">--</div>
                        <div class="metric-change positive" id="activeTestsChange">+5</div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-title">System Health Trend</div>
                    <div class="chart-container">
                        <canvas id="healthTrendChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div id="alertsTab" class="tab-content" style="display: none;">
                <div class="alerts-container">
                    <h3 style="margin-bottom: 1rem; color: #00f5ff;">Recent Alerts</h3>
                    <div id="alertsList">
                        <div class="alert-item medium">
                            <div class="alert-icon" style="background: rgba(255, 165, 0, 0.2);">⚠️</div>
                            <div class="alert-content">
                                <div class="alert-title">Test Pass Rate Below Threshold</div>
                                <div class="alert-description">Current pass rate at 87%, below 90% threshold</div>
                            </div>
                            <div class="alert-time">2 min ago</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="predictionsTab" class="tab-content" style="display: none;">
                <div class="predictions-panel">
                    <h3 style="margin-bottom: 1rem; color: #00f5ff;">AI-Powered Predictions</h3>
                    <div id="predictionsList">
                        <div class="prediction-item">
                            <div class="prediction-icon">🔮</div>
                            <div class="prediction-content">
                                <h4>Failure Risk Assessment</h4>
                                <p>Low risk of system failures in the next 24 hours based on current trends</p>
                                <div class="confidence-bar">
                                    <div class="confidence-fill" style="width: 85%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Other tab contents will be populated dynamically -->
        </div>
    </div>
    
    <div class="live-indicator" id="liveIndicator">
        <div class="status-dot"></div>
        <span>LIVE</span>
    </div>
    
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
    </div>
    
    <script>
        class AIMonitoringDashboard {
            constructor() {
                this.ws = null;
                this.charts = {};
                this.currentTab = 'overview';
                this.healthData = [];
                this.isConnected = false;
                this.retryAttempts = 0;
                this.maxRetryAttempts = 5;
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.initializeCharts();
                this.connectToBackend();
                this.startDataPolling();
            }
            
            setupEventListeners() {
                // Tab navigation
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        this.switchTab(e.target.dataset.tab);
                    });
                });
                
                // Window events
                window.addEventListener('beforeunload', () => {
                    if (this.ws) {
                        this.ws.close();
                    }
                });
            }
            
            switchTab(tabName) {
                // Update navigation
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
                
                // Update content
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.style.display = 'none';
                });
                
                const targetTab = document.getElementById(`${tabName}Tab`);
                if (targetTab) {
                    targetTab.style.display = 'block';
                }
                
                // Update title
                const titles = {
                    overview: 'System Overview',
                    health: 'System Health',
                    tests: 'Test Results',
                    performance: 'Performance Metrics',
                    predictions: 'AI Predictions',
                    alerts: 'System Alerts',
                    trends: 'Trend Analysis',
                    configuration: 'Configuration',
                    export: 'Export Data'
                };
                
                document.getElementById('pageTitle').textContent = titles[tabName] || 'Dashboard';
                this.currentTab = tabName;
            }
            
            initializeCharts() {
                // Health trend chart
                const healthCtx = document.getElementById('healthTrendChart');
                if (healthCtx) {
                    this.charts.healthTrend = new Chart(healthCtx.getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: [],
                            datasets: [{
                                label: 'Overall Score',
                                data: [],
                                borderColor: '#00f5ff',
                                backgroundColor: 'rgba(0, 245, 255, 0.1)',
                                tension: 0.4,
                                fill: true
                            }, {
                                label: 'Test Pass Rate',
                                data: [],
                                borderColor: '#00ff00',
                                backgroundColor: 'rgba(0, 255, 0, 0.1)',
                                tension: 0.4,
                                fill: false
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    labels: {
                                        color: '#ffffff'
                                    }
                                }
                            },
                            scales: {
                                x: {
                                    ticks: { color: '#ffffff' },
                                    grid: { color: '#3a3a4e' }
                                },
                                y: {
                                    ticks: { color: '#ffffff' },
                                    grid: { color: '#3a3a4e' },
                                    beginAtZero: true,
                                    max: 100
                                }
                            }
                        }
                    });
                }
            }
            
            connectToBackend() {
                this.showLoading(true);
                
                // Try to connect via WebSocket first, fallback to polling
                this.connectWebSocket();
            }
            
            connectWebSocket() {
                try {
                    const wsUrl = 'ws://localhost:8000/api/v1/monitoring/live-stream';
                    this.ws = new WebSocket(wsUrl);
                    
                    this.ws.onopen = () => {
                        console.log('WebSocket connected');
                        this.isConnected = true;
                        this.retryAttempts = 0;
                        this.updateConnectionStatus(true);
                        this.showLoading(false);
                    };
                    
                    this.ws.onmessage = (event) => {
                        try {
                            const data = JSON.parse(event.data);
                            this.handleRealtimeData(data);
                        } catch (error) {
                            console.error('Error parsing WebSocket data:', error);
                        }
                    };
                    
                    this.ws.onerror = (error) => {
                        console.error('WebSocket error:', error);
                        this.isConnected = false;
                        this.updateConnectionStatus(false);
                    };
                    
                    this.ws.onclose = () => {
                        console.log('WebSocket disconnected');
                        this.isConnected = false;
                        this.updateConnectionStatus(false);
                        
                        // Attempt to reconnect
                        if (this.retryAttempts < this.maxRetryAttempts) {
                            this.retryAttempts++;
                            setTimeout(() => {
                                this.connectWebSocket();
                            }, 5000 * this.retryAttempts);
                        } else {
                            // Fall back to HTTP polling
                            this.startDataPolling();
                        }
                    };
                } catch (error) {
                    console.error('Failed to create WebSocket:', error);
                    this.startDataPolling();
                }
            }
            
            startDataPolling() {
                // Fallback to HTTP polling
                this.pollData();
                setInterval(() => {
                    if (!this.isConnected) {
                        this.pollData();
                    }
                }, 10000); // Poll every 10 seconds
            }
            
            async pollData() {
                try {
                    const response = await fetch('http://localhost:8000/api/v1/monitoring/dashboard');
                    if (response.ok) {
                        const data = await response.json();
                        this.handleRealtimeData({ type: 'monitoring_update', data });
                        this.updateConnectionStatus(true);
                        this.showLoading(false);
                    } else {
                        throw new Error(`HTTP ${response.status}`);
                    }
                } catch (error) {
                    console.error('Error polling data:', error);
                    this.updateConnectionStatus(false);
                    this.showError('Failed to connect to monitoring service');
                }
            }
            
            handleRealtimeData(message) {
                if (message.type === 'monitoring_update' && message.data) {
                    this.updateDashboard(message.data);
                } else if (message.type === 'error') {
                    this.showError(message.data.error);
                }
            }
            
            updateDashboard(data) {
                // Update metrics
                if (data.current_health) {
                    this.updateMetrics(data.current_health);
                    this.updateHealthChart(data.current_health);
                }
                
                // Update alerts
                if (data.recent_alerts) {
                    this.updateAlerts(data.recent_alerts);
                }
                
                // Update predictions
                if (data.predictions) {
                    this.updatePredictions(data.predictions);
                }
                
                // Update system status
                this.updateSystemStatus(data);
            }
            
            updateMetrics(healthData) {
                document.getElementById('qualityScore').textContent = 
                    Math.round(healthData.overall_score) + '/100';
                document.getElementById('passRate').textContent = 
                    Math.round(healthData.test_pass_rate) + '%';
                document.getElementById('performanceScore').textContent = 
                    Math.round(healthData.performance_score) + '/100';
                document.getElementById('activeTests').textContent = 
                    healthData.active_services?.length || 0;
            }
            
            updateHealthChart(healthData) {
                if (!this.charts.healthTrend) return;
                
                const now = new Date();
                const timeLabel = now.toLocaleTimeString();
                
                // Add new data point
                this.charts.healthTrend.data.labels.push(timeLabel);
                this.charts.healthTrend.data.datasets[0].data.push(healthData.overall_score);
                this.charts.healthTrend.data.datasets[1].data.push(healthData.test_pass_rate);
                
                // Keep only last 20 data points
                if (this.charts.healthTrend.data.labels.length > 20) {
                    this.charts.healthTrend.data.labels.shift();
                    this.charts.healthTrend.data.datasets[0].data.shift();
                    this.charts.healthTrend.data.datasets[1].data.shift();
                }
                
                this.charts.healthTrend.update('none');
            }
            
            updateAlerts(alerts) {
                const alertsList = document.getElementById('alertsList');
                if (!alertsList || !alerts.length) return;
                
                alertsList.innerHTML = '';
                
                alerts.forEach(alert => {
                    const alertElement = document.createElement('div');
                    alertElement.className = `alert-item ${alert.severity}`;
                    
                    const timeAgo = this.getTimeAgo(new Date(alert.timestamp));
                    
                    alertElement.innerHTML = `
                        <div class="alert-icon" style="background: rgba(255, 165, 0, 0.2);">
                            ${this.getAlertIcon(alert.severity)}
                        </div>
                        <div class="alert-content">
                            <div class="alert-title">${alert.title}</div>
                            <div class="alert-description">${alert.description}</div>
                        </div>
                        <div class="alert-time">${timeAgo}</div>
                    `;
                    
                    alertsList.appendChild(alertElement);
                });
            }
            
            updatePredictions(predictions) {
                const predictionsList = document.getElementById('predictionsList');
                if (!predictionsList) return;
                
                predictionsList.innerHTML = '';
                
                // Create prediction items based on data
                const predictionItems = [
                    {
                        icon: '🔮',
                        title: 'Failure Risk Assessment',
                        description: `${predictions.failure_risk || 'Low'} risk detected based on current patterns`,
                        confidence: (predictions.confidence || 0.75) * 100
                    },
                    {
                        icon: '📈',
                        title: 'Performance Trend',
                        description: `System performance trend: ${predictions.performance_trend || 'stable'}`,
                        confidence: 85
                    }
                ];
                
                if (predictions.recommended_actions?.length) {
                    predictionItems.push({
                        icon: '💡',
                        title: 'Recommended Actions',
                        description: predictions.recommended_actions.join(', '),
                        confidence: 90
                    });
                }
                
                predictionItems.forEach(item => {
                    const predictionElement = document.createElement('div');
                    predictionElement.className = 'prediction-item';
                    predictionElement.innerHTML = `
                        <div class="prediction-icon">${item.icon}</div>
                        <div class="prediction-content">
                            <h4>${item.title}</h4>
                            <p>${item.description}</p>
                            <div class="confidence-bar">
                                <div class="confidence-fill" style="width: ${item.confidence}%"></div>
                            </div>
                        </div>
                    `;
                    predictionsList.appendChild(predictionElement);
                });
            }
            
            updateSystemStatus(data) {
                const statusElement = document.getElementById('systemStatus');
                const statusDot = document.getElementById('statusDot');
                
                if (data.current_health) {
                    const score = data.current_health.overall_score;
                    let status = 'Operational';
                    let color = '#00ff00';
                    
                    if (score < 70) {
                        status = 'Critical';
                        color = '#ff4757';
                    } else if (score < 85) {
                        status = 'Degraded';
                        color = '#ffa500';
                    }
                    
                    statusElement.textContent = status;
                    statusDot.style.background = color;
                }
            }
            
            updateConnectionStatus(connected) {
                const connectionStatus = document.getElementById('connectionStatus');
                const liveIndicator = document.getElementById('liveIndicator');
                
                if (connected) {
                    connectionStatus.innerHTML = `
                        <div class="status-dot" style="background: #00ff00;"></div>
                        <span>Connected</span>
                    `;
                    liveIndicator.style.display = 'flex';
                } else {
                    connectionStatus.innerHTML = `
                        <div class="status-dot" style="background: #ff4757;"></div>
                        <span>Disconnected</span>
                    `;
                    liveIndicator.style.display = 'none';
                }
            }
            
            showLoading(show) {
                const overlay = document.getElementById('loadingOverlay');
                if (show) {
                    overlay.classList.add('visible');
                } else {
                    overlay.classList.remove('visible');
                }
            }
            
            showError(message) {
                const errorElement = document.getElementById('errorMessage');
                errorElement.textContent = message;
                errorElement.style.display = 'block';
                
                setTimeout(() => {
                    errorElement.style.display = 'none';
                }, 10000);
            }
            
            getAlertIcon(severity) {
                const icons = {
                    critical: '🚨',
                    high: '⚠️',
                    medium: '⚠️',
                    low: 'ℹ️'
                };
                return icons[severity] || 'ℹ️';
            }
            
            getTimeAgo(date) {
                const now = new Date();
                const diff = now - date;
                const minutes = Math.floor(diff / 60000);
                
                if (minutes < 1) return 'Just now';
                if (minutes < 60) return `${minutes} min ago`;
                
                const hours = Math.floor(minutes / 60);
                if (hours < 24) return `${hours} hr ago`;
                
                const days = Math.floor(hours / 24);
                return `${days} days ago`;
            }
        }
        
        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new AIMonitoringDashboard();
        });
    </script>
</body>
</html>